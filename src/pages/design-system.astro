---
import Shell from "@ui/layouts/Shell.astro";
import designTokens from "@styles/semantic-token-map";

// Primitives
import Heading from "@ui/primitives/Heading.astro";
import Text from "@ui/primitives/Text.astro";
import Container from "@ui/primitives/Container.astro";
import Stack from "@ui/primitives/Stack.astro";
import Section from "@ui/primitives/Section.astro";
import Surface from "@ui/primitives/Surface.astro";
import Link from "@ui/primitives/Link.astro";
import EmphasizedPageLink from "@ui/primitives/EmphasizedPageLink.astro";
import Button from "@ui/primitives/Button.astro";

// Composites
import Card from "@ui/composites/Card.astro";
---

<Shell>
  <Stack>
    <Section>
      <Container size={1}>
        <Stack>
          <Heading as="h1" text="Design System" size={3} />
          <Text size="prominent" textAlign="center">
            A reference for UI primitives and composites used throughout the site.
          </Text>
        </Stack>
      </Container>
    </Section>

    <!-- Typography Section -->
    <Section backgroundColor={(t) => t.primary.default}>
      <Container size={1}>
        <Stack>
          <Heading as="h2" text="Typography" size={2} />

          <Surface variant="neutral" class:list={["p-4", designTokens.shadow.default]}>
            <Stack>
              <Text as="p" size="muted">Heading</Text>
              <Heading as="h3" text="Heading size={3}" size={3} textAlign="left" />
              <Heading as="h3" text="Heading size={2}" size={2} textAlign="left" />
              <Heading as="h3" text="Heading size={1}" size={1} textAlign="left" />
            </Stack>
          </Surface>

          <Surface variant="neutral" class:list={["p-4", designTokens.shadow.default]}>
            <Stack>
              <Text as="p" size="muted">Text</Text>
              <Text size="prominent">
                Text size="prominent" - For emphasized body copy that needs to stand out.
              </Text>
              <Text>
                Text size="default" (default) - Standard body text for general content and paragraphs.
              </Text>
            </Stack>
          </Surface>

          <Surface variant="neutral" class:list={["p-4", designTokens.shadow.default]}>
            <Stack>
              <Text as="p" size="muted">Text size="muted"</Text>
              <Text as="p" size="muted">Small muted text for labels and secondary information</Text>
            </Stack>
          </Surface>
        </Stack>
      </Container>
    </Section>

    <!-- Layout Section -->
    <Section backgroundColor={(t) => t.secondary.default}>
      <Container size={1}>
        <Stack>
          <Heading as="h2" text="Layout" size={2} />

          <Surface variant="neutral" class:list={["p-4", designTokens.shadow.default]}>
            <Stack>
              <Text as="p" size="muted">Container</Text>
              <Text>
                Container constrains content width and centers it. size={1} = max-w-4xl, size={2} = max-w-6xl.
              </Text>
              <div class="border border-dashed border-brown-70 p-2">
                <Container size={1}>
                  <div class="bg-blue-95 p-2 text-center font-serif">Container size={1}</div>
                </Container>
              </div>
            </Stack>
          </Surface>

          <Surface variant="neutral" class:list={["p-4", designTokens.shadow.default]}>
            <Stack>
              <Text as="p" size="muted">Stack</Text>
              <Text>Stack arranges children vertically with consistent gap spacing.</Text>
              <div class="border border-dashed border-brown-70 p-2">
                <Stack>
                  <div class="bg-blue-95 p-2 text-center font-serif">Stack item 1</div>
                  <div class="bg-blue-95 p-2 text-center font-serif">Stack item 2</div>
                  <div class="bg-blue-95 p-2 text-center font-serif">Stack item 3</div>
                </Stack>
              </div>
            </Stack>
          </Surface>

          <Surface variant="neutral" class:list={["p-4", designTokens.shadow.default]}>
            <Stack>
              <Text as="p" size="muted">Section</Text>
              <Text>Section provides semantic structure with background color options.</Text>
            </Stack>
          </Surface>
        </Stack>
      </Container>
    </Section>

    <!-- Section Background Colors -->
    <Section>
      <Container size={1}>
        <Stack>
          <Heading as="h3" text="Section Background Colors" size={1} />
        </Stack>
      </Container>
    </Section>
    <Section backgroundColor={(t) => t.neutral.default}>
      <Container size={1}>
        <Text textAlign="center">neutral.default</Text>
      </Container>
    </Section>
    <Section backgroundColor={(t) => t.neutral.muted}>
      <Container size={1}>
        <Text textAlign="center">neutral.muted</Text>
      </Container>
    </Section>
    <Section backgroundColor={(t) => t.primary.default}>
      <Container size={1}>
        <Text textAlign="center">primary.default</Text>
      </Container>
    </Section>
    <Section backgroundColor={(t) => t.secondary.default}>
      <Container size={1}>
        <Text textAlign="center">secondary.default</Text>
      </Container>
    </Section>
    <Section backgroundColor={(t) => t.tertiary.default}>
      <Container size={1}>
        <Text textAlign="center">tertiary.default</Text>
      </Container>
    </Section>

    <!-- Navigation Section -->
    <Section backgroundColor={(t) => t.tertiary.default}>
      <Container size={1}>
        <Stack>
          <Heading as="h2" text="Navigation" size={2} />

          <Surface variant="neutral" class:list={["p-4", designTokens.shadow.default]}>
            <Stack>
              <Text as="p" size="muted">Link</Text>
              <div class="flex flex-wrap gap-4 items-baseline">
                <Link to="#" label="Primary size={1}" variant="primary" size={1} />
                <Link to="#" label="Primary size={2}" variant="primary" size={2} />
                <Link to="#" label="Primary size={3}" variant="primary" size={3} />
              </div>
              <div class="flex flex-wrap gap-4 items-baseline">
                <Link to="#" label="Neutral size={1}" variant="neutral" size={1} />
                <Link to="#" label="Neutral size={2}" variant="neutral" size={2} />
                <Link to="#" label="Neutral size={3}" variant="neutral" size={3} />
              </div>
            </Stack>
          </Surface>

          <Surface variant="neutral" class:list={["p-4", designTokens.shadow.default]}>
            <Stack>
              <Text as="p" size="muted">EmphasizedPageLink</Text>
              <div>
                <EmphasizedPageLink to="#" label="Call to action" />
              </div>
            </Stack>
          </Surface>
        </Stack>
      </Container>
    </Section>

    <!-- Surface Primitive Section -->
    <Section backgroundColor={(t) => t.primary.default}>
      <Container size={1}>
        <Stack>
          <Heading as="h2" text="Surface (Primitive)" size={2} />

          <Surface variant="neutral" class:list={["p-4", designTokens.shadow.default]}>
            <Stack>
              <Text as="p" size="muted">Surface</Text>
              <Text>
                Surface is a polymorphic primitive for content backgrounds. It automatically
                pairs contentSurfaceColor with matching borderColor. Always bordered by design intent.
              </Text>
              <Text size="muted">Props: as (div, article, aside, section), variant, prominence, rounded</Text>
            </Stack>
          </Surface>

          <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
            <Surface variant="neutral" prominence="prominent" class="p-4">
              <Text as="p" size="muted">neutral / prominent</Text>
            </Surface>
            <Surface variant="neutral" prominence="default" class="p-4">
              <Text as="p" size="muted">neutral / default</Text>
            </Surface>
            <Surface variant="neutral" prominence="muted" class="p-4">
              <Text as="p" size="muted">neutral / muted</Text>
            </Surface>
            <Surface variant="primary" prominence="prominent" class="p-4">
              <Text as="p" size="muted">primary / prominent</Text>
            </Surface>
            <Surface variant="primary" prominence="default" class="p-4">
              <Text as="p" size="muted">primary / default</Text>
            </Surface>
            <Surface variant="primary" prominence="muted" class="p-4">
              <Text as="p" size="muted">primary / muted</Text>
            </Surface>
            <Surface variant="secondary" prominence="prominent" class="p-4">
              <Text as="p" size="muted">secondary / prominent</Text>
            </Surface>
            <Surface variant="secondary" prominence="default" class="p-4">
              <Text as="p" size="muted">secondary / default</Text>
            </Surface>
            <Surface variant="secondary" prominence="muted" class="p-4">
              <Text as="p" size="muted">secondary / muted</Text>
            </Surface>
            <Surface variant="tertiary" prominence="prominent" class="p-4">
              <Text as="p" size="muted">tertiary / prominent</Text>
            </Surface>
            <Surface variant="tertiary" prominence="default" class="p-4">
              <Text as="p" size="muted">tertiary / default</Text>
            </Surface>
            <Surface variant="tertiary" prominence="muted" class="p-4">
              <Text as="p" size="muted">tertiary / muted</Text>
            </Surface>
          </div>
        </Stack>
      </Container>
    </Section>

    <!-- Card Composite Section -->
    <Section backgroundColor={(t) => t.tertiary.default}>
      <Container size={1}>
        <Stack>
          <Heading as="h2" text="Card (Composite)" size={2} />

          <Surface variant="neutral" class:list={["p-4", designTokens.shadow.default]}>
            <Stack>
              <Text as="p" size="muted">Card</Text>
              <Text>
                Card is a structured content composite built on Surface. It accepts image, title,
                and titleHref props. If titleHref is provided, the title renders as a Link;
                otherwise it renders as a Heading.
              </Text>
              <Text size="muted">Props: variant, prominence, image, title, titleHref, external</Text>
            </Stack>
          </Surface>

          <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <Card title="Card with title only" />
            <Card title="Card with link" titleHref="#" />
            <Card title="External link card" titleHref="https://example.com" external>
              <Text>Body content goes in the default slot.</Text>
            </Card>
            <Card title="Card with content" titleHref="#">
              <Text as="p" size="muted">With meta content</Text>
              <Text>And description text.</Text>
            </Card>
          </div>
        </Stack>
      </Container>
    </Section>

    <!-- Interactive Section -->
    <Section backgroundColor={(t) => t.secondary.default}>
      <Container size={1}>
        <Stack>
          <Heading as="h2" text="Interactive" size={2} />

          <Surface variant="neutral" class:list={["p-4", designTokens.shadow.default]}>
            <Stack>
              <Text as="p" size="muted">Button</Text>
              <Text>Button for interactive actions. Distinct from Link which is for navigation.</Text>

              <div class="flex flex-wrap gap-4 items-center">
                <Button variant="primary" size={1}>Primary size={1}</Button>
                <Button variant="primary" size={2}>Primary size={2}</Button>
              </div>

              <div class="flex flex-wrap gap-4 items-center">
                <Button variant="secondary" size={1}>Secondary size={1}</Button>
                <Button variant="secondary" size={2}>Secondary size={2}</Button>
              </div>

              <div class="flex flex-wrap gap-4 items-center">
                <Button variant="tertiary" size={1}>Tertiary size={1}</Button>
                <Button variant="tertiary" size={2}>Tertiary size={2}</Button>
              </div>
            </Stack>
          </Surface>
        </Stack>
      </Container>
    </Section>
  </Stack>
</Shell>

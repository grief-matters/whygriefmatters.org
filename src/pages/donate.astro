---
import MainLayout from "@layouts/MainLayout.astro";
import { getContentGroup } from "@common/client";
import ContentBlockRenderer from "@ui/ContentBlockRenderer.astro";
import Heading from "@ui/primitives/Heading.astro";
import type { ContentBlock } from "@model/contentBlock";
import Container from "@ui/primitives/Container.astro";
import TextBlock from "@ui/typography/TextBlock.astro";

const donateContent = await getContentGroup("donate");
---

<MainLayout>
  <Container>
    <Heading as="h1" size="xl5">
      {donateContent.title}
    </Heading>

    <TextBlock>
    {donateContent.blocks.map((contentBlock: ContentBlock) => (
      <section class="p-2 lg:mb-6 odd:bg-stone-100">
        <ContentBlockRenderer contentBlock={contentBlock} />
      </section>
    ))}
    </TextBlock>

    <!-- Donorbox Embedded Form -->
    <div class="mt-11 mb-11 flex justify-center">
      <div class="w-full max-w-xl px-4">
        <Fragment set:html={`
          <script src="https://donorbox.org/widget.js" paypalExpress="false"></script>
          <iframe
            title="Donation form for Why Grief Matters"
            src="https://donorbox.org/embed/why-grief-matters-a-vision-for-tomorrow"
            name="donorbox"
            allowpaymentrequest
            frameborder="0"
            scrolling="no"
            seamless="seamless"
            height="685px"
            width="100%"
            style="border: none;"
          ></iframe>
        `} />
      </div>
    </div>
  </Container>
</MainLayout>


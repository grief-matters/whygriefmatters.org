---
import type { Polymorphic } from "astro/types";

import { type Prominence } from "@styles/utils/shared";
import {
  type SurfaceColorVariant,
  standardVariantsClassMap,
} from "@styles/utils/color";
import {
  paddingXSettingMap,
  paddingYSettingMap,
  type SpaceSetting,
} from "@styles/utils/spacing";

type SurfaceElement = "div" | "article" | "aside" | "section";
export type ContentSurfaceVariant = SurfaceColorVariant | "featureCard";

interface SurfaceOwnProps {
  as: SurfaceElement;
  variant?: ContentSurfaceVariant;
  prominence?: Prominence;
  paddingX?: SpaceSetting;
  paddingY?: SpaceSetting;
  fullHeight?: boolean;
}

type Props = Polymorphic<SurfaceOwnProps>;

const {
  as: Tag = "div",
  variant = "neutral",
  prominence = "default",
  paddingX,
  paddingY,
  fullHeight,
  ...attrs
} = Astro.props;

const classes =
  variant === "featureCard"
    ? [
        "shadow-lg bg-contentSurface-neutral--prominent",
        "border border-line-coolNeutral--muted",
      ]
    : [
        standardVariantsClassMap[variant][prominence],
        variant !== "primaryContrast" && "rounded-sm",
      ];
---

<Tag
  class:list={[
    ...classes,
    paddingX ? paddingXSettingMap[paddingX] : null,
    paddingY ? paddingYSettingMap[paddingY] : null,
    fullHeight && "h-full",
  ]}
  {...attrs}
>
  <slot />
</Tag>

---
import { getEntry } from "astro:content";
import CategoryResourceTypesPanel from "@ui/composites/CategoryResourceTypesPanel.astro";
import { getResourceTypeCountsForCategory } from "./nav-utils";

interface Props {
  categoryId: string;
}

const props = Astro.props;

const category = await getEntry("categories", props.categoryId);
if (!category) {
  throw new Error(
    `Category with ref: [${props.categoryId}] could not be found in [CategoryResourceTypes]`,
  );
}

const resourceTypeCounts = await getResourceTypeCountsForCategory(category.id);
---

<CategoryResourceTypesPanel
  categorySlug={category.data.slug}
  resourceTypesData={resourceTypeCounts}
/>

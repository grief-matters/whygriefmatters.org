---
import designTokens from "@styles/semantic-token-map";
import Text from "@ui/primitives/Text.astro";
import { isLink, isNonEmptyString, type Link } from "@ui/utils";

interface Props {
  source: string | Link;
  prefaceTextOverride?: string;
}

const { source, prefaceTextOverride } = Astro.props;
---

<Text as="p" size="muted">
  {isNonEmptyString(prefaceTextOverride) ? `${prefaceTextOverride} ` : "From "}
  {
    isLink(source) ? (
      // Render a link if we managed to process one
      <a
        class:list={[
          "underline underline-offset-3",
          designTokens.color.decoration.onContentSurface.neutralAlt.interactive,
          "transition",
          designTokens.motion.transition.default,
        ]}
        href={source.url}
        rel="noopener"
        target="_blank"
      >
        {source.label}
      </a>
    ) : (
      source
    )
  }
</Text>
